# 전북 신고 플랫폼 구현 요구사항 명세서
## 누락 기능 구현을 위한 상세 요구사항

**작성일:** 2025-07-13  
**대상 시스템:** 전북 신고 플랫폼  
**목적:** 현재 누락된 기능들의 구현 요구사항 정의

---

## 🎯 프로젝트 현황 요약

### 현재 상태
- **전체 구현률**: 19.5%
- **실제 사용 가능**: 5% (인프라만)
- **주요 문제**: 모든 애플리케이션 빌드 불가능

### 목표 상태  
- **1차 목표**: 기본 시스템 동작 (6-8주)
- **2차 목표**: 핵심 기능 완성 (12-16주)
- **최종 목표**: 전체 시스템 완성 (20-24주)

---

## 📋 Phase 1: 시스템 기반 구축 (최우선)

### 🚨 1.1 빌드 시스템 복구 (1주)

#### 요구사항 1.1.1: 패키지 구조 통일
**현재 문제**: `com.jbreport.platform`와 `com.jeonbuk.report` 혼재
```yaml
작업 범위:
  - 모든 Java 파일의 패키지명을 com.jeonbuk.report로 통일
  - import 문 전체 수정 (200+ 파일)
  - 패키지 구조 재정리

예상 공수: 2-3일
우선순위: 최고
```

#### 요구사항 1.1.2: 의존성 문제 해결
**현재 문제**: 53개 컴파일 오류, 100+ 빌드 오류
```yaml
main-api-server:
  - javax.persistence 의존성 추가
  - validation-api 의존성 추가
  - Spring Boot 버전 통일 (3.2.x)
  
ai-analysis-server:
  - JPA 의존성 설정 수정
  - Record 클래스 파일명 수정
  - Lombok 설정 확인

flutter-app:
  - intl 패키지 버전 충돌 해결 (^0.20.2)
  - 의존성 버전 매트릭스 작성

예상 공수: 3-4일
우선순위: 최고
```

#### 요구사항 1.1.3: Entity 클래스 생성
**현재 문제**: JPA Entity 클래스 완전 누락
```yaml
필수 생성 Entity:
  - User.java (사용자)
  - Report.java (신고서) 
  - ReportFile.java (첨부파일)
  - Comment.java (댓글)
  - ReportCategory.java (카테고리)
  - ReportStatus.java (상태)
  - Notification.java (알림)
  - UserSession.java (세션)
  - SystemSetting.java (시스템 설정)

요구사항:
  - 데이터베이스 스키마와 완전 일치
  - JPA 어노테이션 적용
  - 관계 매핑 설정 (OneToMany, ManyToOne 등)
  - Builder 패턴 적용
  - 유효성 검증 어노테이션

예상 공수: 5-7일
우선순위: 최고
```

### 🔐 1.2 사용자 인증 시스템 (2주)

#### 요구사항 1.2.1: JWT 기반 인증
```yaml
기능 명세:
  - JWT 토큰 생성/검증
  - 액세스/리프레시 토큰 구조
  - 토큰 저장소 (Redis) 연동
  - 사용자 세션 관리

API 엔드포인트:
  - POST /api/auth/login
  - POST /api/auth/logout  
  - POST /api/auth/refresh
  - GET /api/auth/me

보안 요구사항:
  - 패스워드 해싱 (BCrypt)
  - CORS 설정
  - Rate Limiting
  - SQL Injection 방지

예상 공수: 7-10일
우선순위: 높음
```

#### 요구사항 1.2.2: OAuth 통합
```yaml
지원 제공자:
  - Google OAuth 2.0
  - Kakao Login
  - Naver Login

구현 요구사항:
  - OAuth 콜백 처리
  - 사용자 정보 동기화
  - 기존 계정 연동
  - 프로필 이미지 처리

예상 공수: 5-7일
우선순위: 중간
```

### 🗄️ 1.3 데이터베이스 연동 완성 (1주)

#### 요구사항 1.3.1: JPA Repository 구현
```yaml
필수 Repository:
  - UserRepository
  - ReportRepository  
  - ReportFileRepository
  - CommentRepository
  - CategoryRepository
  - StatusRepository

구현 기능:
  - 기본 CRUD 메서드
  - 커스텀 쿼리 메서드
  - 페이징 처리
  - 정렬 기능
  - 동적 쿼리 (Querydsl)

예상 공수: 4-5일
우선순위: 높음
```

#### 요구사항 1.3.2: 데이터베이스 마이그레이션
```yaml
초기 데이터 설정:
  - 기본 카테고리 데이터
  - 상태 데이터 (접수, 처리중, 완료 등)
  - 관리자 계정 생성
  - 시스템 설정 초기값

테스트 데이터:
  - 더미 사용자 50명
  - 샘플 신고서 100건
  - 테스트 이미지 파일

예상 공수: 2-3일
우선순위: 중간
```

---

## 📱 Phase 2: 핵심 기능 구현 (3-4주)

### 🗂️ 2.1 신고서 관리 시스템

#### 요구사항 2.1.1: 신고서 CRUD API
```yaml
핵심 기능:
  - 신고서 작성 (제목, 설명, 카테고리, 위치)
  - 첨부파일 업로드 (이미지 최대 5개)
  - 신고서 목록 조회 (페이징, 필터링)
  - 신고서 상세 조회
  - 신고서 수정/삭제

API 엔드포인트:
  - POST /api/reports
  - GET /api/reports
  - GET /api/reports/{id}
  - PUT /api/reports/{id}
  - DELETE /api/reports/{id}

예상 공수: 7-10일
우선순위: 최고
```

#### 요구사항 2.1.2: 파일 업로드 시스템
```yaml
파일 처리:
  - 이미지 리사이징 (썸네일 생성)
  - 파일 유형 검증 (JPEG, PNG, WEBP)
  - 파일 크기 제한 (개당 10MB)
  - 중복 파일 검사 (해시 기반)
  - 스토리지 연동 (로컬/S3)

보안 요구사항:
  - 파일 스캔 (바이러스 체크)
  - EXIF 데이터 제거
  - 안전한 파일명 생성

예상 공수: 5-7일
우선순위: 높음
```

### 👨‍💼 2.2 관리자 기능 구현

#### 요구사항 2.2.1: 관리자 대시보드
```yaml
대시보드 기능:
  - 신고서 통계 (일별, 월별)
  - 카테고리별 신고 현황
  - 처리 상태별 현황
  - 사용자 활동 통계

차트 구성:
  - 신고서 추이 그래프
  - 카테고리별 원형 차트
  - 지역별 히트맵
  - 처리 성과 지표

예상 공수: 5-7일
우선순위: 중간
```

#### 요구사항 2.2.2: 신고서 관리 기능
```yaml
관리 기능:
  - 신고서 상태 변경 (접수→처리중→완료)
  - 담당자 배정
  - 관리자 댓글 작성
  - 신고서 병합/분할
  - 처리 결과 첨부

워크플로우:
  - 자동 배정 규칙 설정
  - 알림 발송 자동화
  - 에스컬레이션 룰
  - SLA 모니터링

예상 공수: 7-10일
우선순위: 높음
```

### 🤖 2.3 AI 분석 기능

#### 요구사항 2.3.1: 이미지 분석 엔진
```yaml
분석 기능:
  - 객체 탐지 (도로, 건물, 차량 등)
  - 손상 유형 분류 (포트홀, 그래피티 등)
  - 심각도 평가 (1-5단계)
  - 위치 정보 추출

Roboflow 연동:
  - 커스텀 모델 학습
  - 실시간 추론 API
  - 결과 신뢰도 평가
  - 모델 성능 모니터링

예상 공수: 10-14일
우선순위: 중간
```

#### 요구사항 2.3.2: 텍스트 분석
```yaml
자연어 처리:
  - 감정 분석 (긍정/부정)
  - 키워드 추출
  - 카테고리 자동 분류
  - 중요도 스코어링

OpenAI/OpenRouter 연동:
  - GPT 모델 활용
  - 프롬프트 엔지니어링
  - 응답 후처리
  - 비용 최적화

예상 공수: 7-10일
우선순위: 중간
```

### 📱 2.4 Flutter 모바일 앱

#### 요구사항 2.4.1: 핵심 화면 구현
```yaml
필수 화면:
  - 로그인/회원가입 화면
  - 홈 대시보드
  - 신고서 작성 화면
  - 신고서 목록/상세 화면
  - 설정 화면

UI/UX 요구사항:
  - Material 3 디자인 적용
  - 다크모드 지원
  - 반응형 레이아웃
  - 접근성 준수

예상 공수: 10-14일
우선순위: 높음
```

#### 요구사항 2.4.2: 네이티브 기능 연동
```yaml
카메라/갤러리:
  - 다중 이미지 선택
  - 실시간 미리보기
  - 이미지 편집 (크롭, 회전)
  - 이미지 압축

위치 서비스:
  - GPS 위치 획득
  - 주소 변환 (Geocoding)
  - 지도 표시
  - 위치 기반 검색

예상 공수: 7-10일
우선순위: 높음
```

---

## 🔔 Phase 3: 고도화 기능 (2-3주)

### 🔄 3.1 실시간 알림 시스템

#### 요구사항 3.1.1: WebSocket 알림
```yaml
실시간 기능:
  - 신고서 상태 변경 알림
  - 댓글 알림
  - 시스템 공지사항
  - 관리자 메시지

구현 방식:
  - Spring WebSocket
  - STOMP 프로토콜
  - 사용자별 개인 채널
  - 연결 관리 및 재연결

예상 공수: 7-10일
우선순위: 중간
```

#### 요구사항 3.1.2: 푸시 알림
```yaml
모바일 푸시:
  - Firebase Cloud Messaging
  - 개인화된 알림 내용
  - 알림 설정 관리
  - 배지 카운트 관리

이메일 알림:
  - SMTP 서버 연동
  - HTML 템플릿
  - 배치 발송
  - 수신 확인

예상 공수: 5-7일
우선순위: 낮음
```

### 🗺️ 3.2 위치 기반 서비스

#### 요구사항 3.2.1: 지도 통합
```yaml
지도 기능:
  - Google Maps 연동
  - 신고서 위치 표시
  - 클러스터링
  - 히트맵 표시

검색 기능:
  - 주소 기반 검색
  - 반경 내 검색
  - 카테고리별 필터
  - 거리 정렬

예상 공수: 7-10일
우선순위: 중간
```

### 🔑 3.3 API 키 관리 시스템

#### 요구사항 3.3.1: 동적 API 키 관리
```yaml
관리 기능:
  - API 키 CRUD 연산
  - 사용량 모니터링
  - 요청 제한 설정
  - 키 순환 정책

보안 기능:
  - 키 암호화 저장
  - IP 화이트리스트
  - 사용 패턴 분석
  - 이상 탐지

예상 공수: 5-7일
우선순위: 낮음
```

---

## 📊 구현 우선순위 매트릭스

### 🚨 최우선 (Critical)
```
1. 빌드 시스템 복구 (1주)
2. Entity 클래스 생성 (1주)  
3. 사용자 인증 구현 (2주)
4. 기본 CRUD API (2주)
```

### 🔥 높음 (High)
```
5. 파일 업로드 시스템 (1주)
6. Flutter 앱 핵심 화면 (2주)
7. 관리자 기능 기본 (2주)
8. 데이터베이스 연동 완성 (1주)
```

### 📋 중간 (Medium)
```
9. AI 분석 기능 (2-3주)
10. 관리자 대시보드 (1주)
11. 실시간 알림 (1-2주)
12. 지도 연동 (1-2주)
```

### 📝 낮음 (Low)
```
13. OAuth 통합 (1주)
14. 푸시 알림 (1주)
15. API 키 관리 (1주)
16. 고급 분석 기능 (1-2주)
```

---

## 🎯 마일스톤 계획

### 🏃‍♂️ Sprint 1 (2주) - 시스템 기반
- [ ] 빌드 시스템 복구
- [ ] Entity 클래스 생성  
- [ ] 기본 API 구조 구축
- [ ] 데이터베이스 연동

**목표**: 기본 시스템 동작 가능

### 🚀 Sprint 2 (3주) - 핵심 기능
- [ ] 사용자 인증 완성
- [ ] 신고서 CRUD 완성
- [ ] 파일 업로드 구현
- [ ] Flutter 앱 기본 화면

**목표**: 기본 신고 시스템 동작

### ⚡ Sprint 3 (3주) - 관리 기능
- [ ] 관리자 기능 구현
- [ ] AI 분석 기본 기능
- [ ] 실시간 알림 시스템
- [ ] 앱 고도화

**목표**: 완전한 신고 플랫폼

### 🎉 Sprint 4 (2주) - 최적화
- [ ] 성능 최적화
- [ ] 보안 강화
- [ ] UI/UX 개선
- [ ] 테스트 완성

**목표**: 프로덕션 배포 준비

---

## 📋 기술 스택 요구사항

### 백엔드
```yaml
Framework: Spring Boot 3.2.x
Database: PostgreSQL 15+ with PostGIS
Cache: Redis 7+
Message Queue: Apache Kafka
Authentication: JWT + OAuth 2.0
File Storage: Local/AWS S3
AI Integration: OpenRouter, Roboflow
```

### 프론트엔드  
```yaml
Framework: Flutter 3.32+
State Management: Riverpod
Navigation: Go Router
Network: Dio + Retrofit
Storage: Secure Storage
Maps: Google Maps
Push: Firebase Messaging
```

### 인프라
```yaml
Containerization: Docker + Docker Compose
Web Server: Nginx
Monitoring: Prometheus + Grafana
Logging: ELK Stack
CI/CD: GitHub Actions
```

---

## 🎯 성공 지표 (KPI)

### 기술적 지표
- [ ] 빌드 성공률: 100%
- [ ] 테스트 커버리지: 80%+
- [ ] API 응답시간: 평균 200ms 이하
- [ ] 시스템 가용성: 99.9%

### 기능적 지표  
- [ ] 신고서 작성 완료율: 95%+
- [ ] AI 분석 정확도: 85%+
- [ ] 사용자 인증 성공률: 99%+
- [ ] 파일 업로드 성공률: 98%+

### 사용자 경험 지표
- [ ] 앱 로딩 시간: 3초 이내
- [ ] 사용자 만족도: 4.0/5.0+
- [ ] 문제 해결 시간: 평균 24시간 이내
- [ ] 재방문률: 60%+

---

## 💡 구현 권고사항

### 개발 방법론
1. **애자일 스크럼** 적용 (2주 스프린트)
2. **TDD** (테스트 주도 개발) 도입
3. **CI/CD** 파이프라인 구축
4. **코드 리뷰** 의무화

### 품질 관리
1. **자동화 테스트** 구축
2. **성능 모니터링** 도입  
3. **보안 감사** 정기 실시
4. **문서화** 지속 업데이트

### 팀 구성 권장
- **백엔드 개발자**: 2-3명
- **프론트엔드 개발자**: 1-2명  
- **AI/ML 엔지니어**: 1명
- **DevOps 엔지니어**: 1명
- **QA 엔지니어**: 1명

이 요구사항 명세서를 기반으로 체계적인 개발 계획을 수립하여 전북 신고 플랫폼을 성공적으로 완성할 수 있습니다.