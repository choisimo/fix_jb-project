

---

## 5. 지도 API 연동 현황 및 문제점 분석

### 5.1. 네이버 지도 API 테스트 결과

- **테스트 목적**: 네이버 클라우드 플랫폼 Maps API (Geocoding)의 유효성 및 데이터 반환 여부 확인
- **사용된 API 키**:
    - Client ID: `6gmofoay96`
    - Client Secret: `6WQ3He7rBpcsa02WtRY6A9ycU5MsClOvKkwZ6O1B`
- **테스트 명령어**:
    ```bash
    curl -G 'https://maps.apigw.ntruss.com/map-geocode/v2/geocode' \
    --data-urlencode 'query=불정로 6' \
    --header 'x-ncp-apigw-api-key-id: 6gmofoay96' \
    --header 'x-ncp-apigw-api-key: 6WQ3He7rBpcsa02WtRY6A9ycU5MsClOvKkwZ6O1B' -v
    ```
    ```bash
    curl -G 'https://maps.apigw.ntruss.com/map-geocode/v2/geocode' \
    --data-urlencode 'query=서울특별시청' \
    --header 'x-ncp-apigw-api-key-id: 6gmofoay96' \
    --header 'x-ncp-apigw-api-key: 6WQ3He7rBpcsa02WtRY6A9ycU5MsClOvKkwZ6O1B' -v
    ```

- **테스트 결과**:
    - 두 테스트 모두 HTTP 200 OK 응답을 수신했습니다.
    - 그러나 응답 본문(`content-length: 0`)이 비어있어, 지오코딩 결과 데이터가 반환되지 않았습니다.

### 5.2. 문제점 분석 및 해결 방안

- **분석**:
    - API 키(Client ID, Client Secret)는 유효하며, 네이버 클라우드 플랫폼의 API Gateway까지의 연결은 정상적으로 이루어지고 있음을 확인했습니다.
    - 문제는 API Gateway 이후의 엔드포인트에서 실제 지오코딩 데이터가 반환되지 않는 것입니다. 이는 API 서비스 자체의 문제이거나, 네이버 클라우드 플랫폼 콘솔에서 해당 API에 대한 추가적인 설정(예: 사용량 제한, 특정 IP 허용 등)이 필요할 수 있음을 시사합니다.
    - `NAVER_MAP_SETUP.md` 문서에 언급된 "콘솔에서 Application 등록 후 사용할 API가 선택되어 있는지 [수정] 버튼을 클릭하여 확인해 주십시오. 선택되어 있지 않으면 429 (Quota Exceed) 오류가 발생합니다." 라는 내용이 있지만, 429 오류가 아닌 200 OK에 빈 응답이므로 다른 설정 문제일 가능성이 높습니다.

- **해결 방안 (권고)**:
    1.  **네이버 클라우드 플랫폼 콘솔 재확인**:
        -   `oss-project-4w` 애플리케이션의 Maps 서비스 설정에서 `Geocoding` API가 올바르게 활성화되어 있는지 다시 한번 확인합니다.
        -   혹시 모를 사용량 제한이나 기타 정책 설정이 있는지 검토합니다.
    2.  **네이버 클라우드 플랫폼 고객 지원 문의**:
        -   API 키가 유효함에도 불구하고 유효한 쿼리에 대해 빈 응답이 오는 현상에 대해 네이버 클라우드 플랫폼 고객 지원팀에 문의하여 기술적인 지원을 요청합니다.
        -   가능하다면, 공식 문서에 있는 예제 쿼리를 그대로 사용하여 테스트해보고, 동일한 문제가 발생하는지 확인합니다.
    3.  **Flutter 앱 내 연동 코드 점검**:
        -   API 자체의 문제가 해결된 후, `flutter_naver_map` 라이브러리를 사용하여 Flutter 앱 내에서 Geocoding API를 호출하는 방식이 올바른지 다시 한번 점검합니다. (현재는 API 자체의 문제로 보임)
