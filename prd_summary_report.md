# PRD Summary Report

## Table of Contents
1. [✦ 제품 요구사항 문서 (PRD) -](#✦-제품-요구사항-문서-(prd)--)
2. [AI 통합 라우팅 시스템 PRD (Product Requirements Document)](#ai-통합-라우팅-시스템-prd-(product-requirements-document))
3. [Roboflow 데이터 모델 학습 서비스 PRD (Product Requirements Document)](#roboflow-데이터-모델-학습-서비스-prd-(product-requirements-document))
4. [PRD: 알림 서비스 통합](#prd:-알림-서비스-통합)

## 1. ✦ 제품 요구사항 문서 (PRD) -

**Overview**


---

## 2. AI 통합 라우팅 시스템 PRD (Product Requirements Document)

**Overview**


**User Scenarios**
- 시나리오 1: 정상적인 이미지 분석 요청** *   사용자는 손상된 도로 이미지를 시스템에 업로드합니다. *   통합 AI 에이전트는 이미지 메타데이터와 사용자 설명을 파싱하여 '도로 파손' 유형임을 분석합니다. *   통합 AI 에이전트는 분석 결과에 따라 'pothole-detection' Roboflow 모델로 라우팅을 결정합니다. *   유효성 검증 AI 에이전트는 파싱된 데이터와 라우팅 결정이 유효함을 확인합니다. *   시스템은 'pothole-detection' 모델을 호출하여 이미지 분석을 수행하고 결과를 반환합니다. *   모든 과정은 단일 트랜잭션으로 성공적으로 완료됩니다.
- 시나리오 2: 유효하지 않은 입력 데이터** *   사용자는 불분명하거나 유효하지 않은 형식의 데이터를 시스템에 업로드합니다. *   통합 AI 에이전트는 데이터를 파싱하려 시도합니다. *   유효성 검증 AI 에이전트는 파싱된 데이터가 유효하지 않음을 감지합니다. *   시스템은 트랜잭션을 롤백하고 사용자에게 오류 메시지를 반환합니다.
- 시나리오 3: 부적절한 모델 라우팅 결정** *   통합 AI 에이전트가 특정 입력에 대해 잘못된 Roboflow 모델로 라우팅을 결정합니다. *   유효성 검증 AI 에이전트는 이 라우팅 결정이 사전에 정의된 규칙에 위배됨을 감지합니다. *   시스템은 트랜잭션을 롤백하고 오류를 기록합니다. ## 6. 성공 지표

---

## 3. Roboflow 데이터 모델 학습 서비스 PRD (Product Requirements Document)

**Overview**


**User Scenarios**
- 시나리오 1: 자동 라벨링 및 모델 학습 성공** *   사용자가 손상된 도로 이미지를 업로드하고 Roboflow 학습을 요청합니다. *   통합 AI 에이전트가 이미지를 Qwen2.5 VL 72B Vision 분석 서비스로 라우팅합니다. *   Vision 분석 서비스가 이미지 내 객체(예: 포트홀)와 텍스트(예: 도로명)를 감지하고 라벨링합니다. *   OCR 자동 라벨링 유효성 검증 서비스가 텍스트 라벨링의 정확성을 확인하고 유효하다고 판단합니다. *   유효성 검증 AI 에이전트가 모든 과정이 유효함을 확인하고 Roboflow 데이터셋 업데이트를 승인합니다. *   Roboflow 데이터 모델 학습 서비스가 업데이트된 데이터셋으로 Roboflow 모델 학습을 트리거하고 성공적으로 완료합니다.
- 시나리오 2: OCR 자동 라벨링 오류 발생 및 보정** *   사용자가 흐릿한 도로 표지판 이미지를 업로드합니다. *   Vision 분석 서비스가 텍스트를 인식하지만, OCR 자동 라벨링 유효성 검증 서비스가 인식된 텍스트의 정확도가 낮다고 판단합니다. *   유효성 검증 서비스는 해당 라벨에 '수동 검토 필요' 플래그를 지정하고, 가능한 경우 Qwen2.5 VL 72B의 추가 분석을 통해 보정을 시도합니다. *   AI 에이전트 라우터는 이 정보를 Roboflow 데이터셋에 반영하고, 수동 검토가 필요한 항목을 표시합니다.
- 시나리오 3: Vision 분석 실패로 인한 트랜잭션 롤백** *   사용자가 지원되지 않는 형식의 이미지를 업로드하거나, Qwen2.5 VL 72B API 호출에 실패합니다. *   통합 AI 에이전트 또는 Vision 분석 서비스에서 오류를 감지합니다. *   AI 에이전트 라우터의 트랜잭션 관리 로직에 따라 전체 트랜잭션이 롤백되고, 사용자에게 적절한 오류 메시지가 반환됩니다. ## 6. 성공 지표

---

## 4. PRD: 알림 서비스 통합

**Overview**
## 2. 목표
*   보고서 제출, 상태 변경, 담당자 지정 등 핵심 이벤트에 대한 즉각적인 알림 제공.
*   모바일 앱 푸시 알림, 웹 대시보드 실시간 알림 등 다양한 채널 지원.
*   안정적이고 확장 가능한 알림 시스템 구축.

## 3. 범위
*   **모바일 애플리케이션 (Flutter):** 푸시 알림 수신 및 표시.
*   **웹 대시보드 (Spring Boot + Frontend):** 실시간 인앱 알림 수신 및 표시.
*   **백엔드 서비스 (Spring Boot):** 알림 이벤트 트리거 및 전송 로직.
*   **메시징 시스템 (Apache Kafka):** 알림 이벤트 발행 및 구독.

## 4. 주요 기능
*   **보고서 관련 알림:**
    *   새로운 보고서 제출 시 관리자에게 알림.
    *   보고서 상태 변경 (접수, 처리 중, 완료, 반려 등) 시 관련 사용자에게 알림.
    *   보고서 담당자 지정/변경 시 해당 담당자에게 알림.
    *   보고서에 대한 피드백/댓글 추가 시 관련 사용자에게 알림.
*   **시스템 알림:**
    *   중요 시스템 이벤트 (예: AI 분석 완료, 오류 발생) 발생 시 관리자에게 알림.
*   **알림 채널:**
    *   **모바일 푸시 알림 (FCM):** 모바일 앱이 백그라운드 또는 종료 상태일 때 알림.
    *   **웹 소켓 / SSE (웹 대시보드):** 웹 대시보드가 활성화되어 있을 때 실시간 인앱 알림.
    *   **인앱 알림 (모바일/웹):** 앱/대시보드 내 알림 목록 또는 배지 표시.

## 5. 기술 스택 및 아키텍처
*   **이벤트 기반 아키텍처:**
    *   핵심 이벤트 발생 시 (예: 보고서 생성, 상태 변경) Spring Boot 백엔드에서 Kafka 토픽으로 알림 이벤트를 발행.
    *   별도의 알림 서비스 (또는 기존 백엔드 내 모듈)가 Kafka 토픽을 구독하여 알림 전송 로직 수행.
*   **모바일 푸시 알림:**
    *   **FCM (Firebase Cloud Messaging):** Google의 FCM 서비스를 활용하여 모바일 앱으로 푸시 알림 전송.
    *   **백엔드:** Firebase Admin SDK를 사용하여 FCM 메시지 전송.
    *   **Flutter 앱:** `firebase_messaging` 패키지를 사용하여 FCM 메시지 수신 및 처리.
*   **웹 대시보드 실시간 알림:**
    *   **WebSocket:** Spring Boot의 `spring-boot-starter-websocket`을 활용하여 웹 소켓 서버 구축.
    *   **Frontend:** WebSocket 클라이언트를 사용하여 서버와 연결하고 실시간 알림 수신.
    *   **대안 (SSE):** WebSocket 대신 SSE를 고려할 수 있으며, 이는 단방향 통신에 더 적합하고 구현이 간단할 수 있음. (초기 구현 시 고려)
*   **데이터베이스:** 알림 내역 저장을 위한 PostgreSQL.

## 6. 데이터 흐름

**Goals**
- 보고서 제출, 상태 변경, 담당자 지정 등 핵심 이벤트에 대한 즉각적인 알림 제공.
- 모바일 앱 푸시 알림, 웹 대시보드 실시간 알림 등 다양한 채널 지원.
- 안정적이고 확장 가능한 알림 시스템 구축.
- **모바일 애플리케이션 (Flutter):** 푸시 알림 수신 및 표시.
- **웹 대시보드 (Spring Boot + Frontend):** 실시간 인앱 알림 수신 및 표시.
- **백엔드 서비스 (Spring Boot):** 알림 이벤트 트리거 및 전송 로직.
- **메시징 시스템 (Apache Kafka):** 알림 이벤트 발행 및 구독.
- **보고서 관련 알림:**
- 새로운 보고서 제출 시 관리자에게 알림.
- 보고서 상태 변경 (접수, 처리 중, 완료, 반려 등) 시 관련 사용자에게 알림.
- 보고서 담당자 지정/변경 시 해당 담당자에게 알림.
- 보고서에 대한 피드백/댓글 추가 시 관련 사용자에게 알림.
- **시스템 알림:**
- 중요 시스템 이벤트 (예: AI 분석 완료, 오류 발생) 발생 시 관리자에게 알림.
- **알림 채널:**
- **모바일 푸시 알림 (FCM):** 모바일 앱이 백그라운드 또는 종료 상태일 때 알림.
- **웹 소켓 / SSE (웹 대시보드):** 웹 대시보드가 활성화되어 있을 때 실시간 인앱 알림.
- **인앱 알림 (모바일/웹):** 앱/대시보드 내 알림 목록 또는 배지 표시.
- **이벤트 기반 아키텍처:**
- 핵심 이벤트 발생 시 (예: 보고서 생성, 상태 변경) Spring Boot 백엔드에서 Kafka 토픽으로 알림 이벤트를 발행.
- 별도의 알림 서비스 (또는 기존 백엔드 내 모듈)가 Kafka 토픽을 구독하여 알림 전송 로직 수행.
- **모바일 푸시 알림:**
- **FCM (Firebase Cloud Messaging):** Google의 FCM 서비스를 활용하여 모바일 앱으로 푸시 알림 전송.
- **백엔드:** Firebase Admin SDK를 사용하여 FCM 메시지 전송.
- **Flutter 앱:** `firebase_messaging` 패키지를 사용하여 FCM 메시지 수신 및 처리.
- **웹 대시보드 실시간 알림:**
- **WebSocket:** Spring Boot의 `spring-boot-starter-websocket`을 활용하여 웹 소켓 서버 구축.
- **Frontend:** WebSocket 클라이언트를 사용하여 서버와 연결하고 실시간 알림 수신.
- **대안 (SSE):** WebSocket 대신 SSE를 고려할 수 있으며, 이는 단방향 통신에 더 적합하고 구현이 간단할 수 있음. (초기 구현 시 고려)
- **데이터베이스:** 알림 내역 저장을 위한 PostgreSQL.

**Technical Stack**
*   **이벤트 기반 아키텍처:**
    *   핵심 이벤트 발생 시 (예: 보고서 생성, 상태 변경) Spring Boot 백엔드에서 Kafka 토픽으로 알림 이벤트를 발행.
    *   별도의 알림 서비스 (또는 기존 백엔드 내 모듈)가 Kafka 토픽을 구독하여 알림 전송 로직 수행.
*   **모바일 푸시 알림:**
    *   **FCM (Firebase Cloud Messaging):** Google의 FCM 서비스를 활용하여 모바일 앱으로 푸시 알림 전송.
    *   **백엔드:** Firebase Admin SDK를 사용하여 FCM 메시지 전송.
    *   **Flutter 앱:** `firebase_messaging` 패키지를 사용하여 FCM 메시지 수신 및 처리.
*   **웹 대시보드 실시간 알림:**
    *   **WebSocket:** Spring Boot의 `spring-boot-starter-websocket`을 활용하여 웹 소켓 서버 구축.
    *   **Frontend:** WebSocket 클라이언트를 사용하여 서버와 연결하고 실시간 알림 수신.
    *   **대안 (SSE):** WebSocket 대신 SSE를 고려할 수 있으며, 이는 단방향 통신에 더 적합하고 구현이 간단할 수 있음. (초기 구현 시 고려)
*   **데이터베이스:** 알림 내역 저장을 위한 PostgreSQL.

## 6. 데이터 흐름

---

