# λ°±μ—”λ“ API ν…μ¤νΈ μ‹¤ν–‰ λ³΄κ³ μ„

**ν…μ¤νΈ μν–‰μΌ**: 2025λ…„ 7μ›” 15μΌ  
**ν…μ¤νΈ μν–‰μ**: AI Assistant  
**ν…μ¤νΈ λ€μƒ**: JB Platform λ°±μ—”λ“ μ‹μ¤ν…

## 1. μ„λΉ„μ¤ μƒνƒ μ”μ•½

| μ„λΉ„μ¤λ… | ν¬νΈ | μƒνƒ | ν—¬μ¤μ²΄ν¬ κ²°κ³Ό | λΉ„κ³  |
|---------|------|------|---------------|------|
| postgres-main | 5434 | UP (healthy) | β… μ •μƒ | λ©”μΈ λ°μ΄ν„°λ² μ΄μ¤ |
| postgres-ai | 5433 | UP (healthy) | β… μ •μƒ | AI λ¶„μ„μ© λ°μ΄ν„°λ² μ΄μ¤ |
| redis | 6379 | UP (healthy) | β… μ •μƒ | μΊμ‹ μ„λ²„ |
| main-api-server | 8080 | UP (unhealthy) | β οΈ λ¶€λ¶„ μ •μƒ | API μ„λ²„ |
| ai-analysis-server | 8086 | UP (unhealthy) | β λΉ„μ •μƒ | AI λ¶„μ„ μ„λ²„ |
| api-gateway | 9000 | UP | β μ‘λ‹µ μ—†μ | API κ²μ΄νΈμ›¨μ΄ |
| jb-env-manager | 8888 | UP | β… μ •μƒ | ν™κ²½ κ΄€λ¦¬μ |

## 2. API μ—”λ“ν¬μΈνΈ ν…μ¤νΈ κ²°κ³Ό

### 2.1 λ©”μΈ API μ„λ²„ (localhost:8080)

#### β… μ •μƒ μ‘λ™ API
- **ν—¬μ¤μ²΄ν¬** (`/actuator/health`): μ •μƒ μ‘λ‹µ
  - λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²°: μ •μƒ
  - Redis μ—°κ²°: μ •μƒ
  - λ””μ¤ν¬ κ³µκ°„: μ •μƒ

#### β οΈ μΈμ¦ ν•„μ” API (HTTP 403)
- μ‚¬μ©μ κ΄€λ¦¬ (`/api/users`): μΈμ¦ ν•„μ”
- μ‹ κ³  κ΄€λ¦¬ (`/api/reports`): μΈμ¦ ν•„μ”
- AI λΌμ°ν… (`/ai-routing/health`): μΈμ¦ ν•„μ”
- SMS μΈμ¦ (`/api/verification/sms/status`): μΈμ¦ ν•„μ”

#### π”‘ μΈμ¦ ν…μ¤νΈ
- **λ΅κ·ΈμΈ API** (`/api/auth/login`): μ‘λ‹µ μ •μƒ
  - μλ»λ μκ²©μ¦λ…μ— λ€ν• μ μ ν• μ¤λ¥ λ©”μ‹μ§€ λ°ν™
  - JSON μ‘λ‹µ ν•μ‹ μ •μƒ

### 2.2 AI λ¶„μ„ μ„λ²„ (localhost:8086)

#### β λ¬Έμ  λ°κ²¬
- **μ»¨ν…μ¤νΈ ν¨μ¤ μ„¤μ • λ¬Έμ **: `/api/v1`λ΅ μ„¤μ •λμ–΄ μμ
- λ€λ¶€λ¶„μ μ—”λ“ν¬μΈνΈμ—μ„ 404 μ¤λ¥ λ°μƒ
- μ΄λ―Έμ§€ μ—…λ΅λ“ API (`/simple/upload`): μ ‘κ·Ό λ¶κ°€
- ν—¬μ¤μ²΄ν¬ μ—”λ“ν¬μΈνΈ: μ„¤μ • μ¤λ¥λ΅ μ ‘κ·Ό λ¶κ°€

### 2.3 API κ²μ΄νΈμ›¨μ΄ (localhost:9000)

#### β μ„λΉ„μ¤ λΉ„μ •μƒ
- ν—¬μ¤μ²΄ν¬ μ—”λ“ν¬μΈνΈ μ‘λ‹µ μ—†μ
- κΈ°λ³Έ κ²½λ΅ μ ‘κ·Ό λ¶κ°€

### 2.4 ν™κ²½ κ΄€λ¦¬μ (localhost:8888)

#### β… μ •μƒ μ‘λ™
- μ›Ή μΈν„°νμ΄μ¤ μ •μƒ λ΅λ“
- HTML μ‘λ‹µ μ •μƒ

## 3. λ°κ²¬λ μ£Όμ” λ¬Έμ μ 

### 3.1 μ‹¬κ°λ„ λ†’μ π”΄
1. **AI λ¶„μ„ μ„λ²„ μ»¨ν…μ¤νΈ ν¨μ¤ μ¤λ¥**
   - μ„λ²„λ” `/api/v1` μ»¨ν…μ¤νΈλ΅ μ‹¤ν–‰ μ¤‘
   - API μ—”λ“ν¬μΈνΈ μ ‘κ·Ό λ¶κ°€

2. **API κ²μ΄νΈμ›¨μ΄ μ„λΉ„μ¤ λΉ„μ •μƒ**
   - μ™„μ „ν μ‘λ‹µν•μ§€ μ•μ
   - λΌμ°ν… κΈ°λ¥ μν–‰ λ¶κ°€

### 3.2 μ‹¬κ°λ„ μ¤‘κ°„ π΅
1. **λ©”μΈ API μ„λ²„ ν—¬μ¤μ²΄ν¬ μƒνƒ λ¶μΌμΉ**
   - Dockerμ—μ„λ” unhealthyλ΅ ν‘μ‹
   - μ‹¤μ  ν—¬μ¤μ²΄ν¬ APIλ” μ •μƒ μ‘λ‹µ

2. **μΈμ¦ μ‹μ¤ν… μ •μƒ μ‘λ™**
   - λ¨λ“  λ³΄νΈλ μ—”λ“ν¬μΈνΈμ—μ„ μ μ ν• 403 μ‘λ‹µ
   - λ΅κ·ΈμΈ API μ •μƒ μ‘λ™

## 4. κ²€μ¦λ API μ—”λ“ν¬μΈνΈ λ©λ΅

### λ©”μΈ API μ„λ²„μ—μ„ λ°κ²¬λ μ—”λ“ν¬μΈνΈ:
- **μΈμ¦ κ΄€λ ¨**: `/api/auth/*` (15κ° μ—”λ“ν¬μΈνΈ)
- **μ‚¬μ©μ κ΄€λ¦¬**: `/api/users/*` (9κ° μ—”λ“ν¬μΈνΈ)
- **μ‹ κ³  κ΄€λ¦¬**: `/api/reports/*` (6κ° μ—”λ“ν¬μΈνΈ)
- **λ“κΈ€ κ΄€λ¦¬**: `/api/v1/comments/*` (7κ° μ—”λ“ν¬μΈνΈ)
- **νμΌ κ΄€λ¦¬**: `/api/v1/files/*` (4κ° μ—”λ“ν¬μΈνΈ)
- **μΈμ¦/κ²€μ¦**: `/api/verification/*` (6κ° μ—”λ“ν¬μΈνΈ)
- **ν†µκ³„**: `/api/v1/statistics/*` (4κ° μ—”λ“ν¬μΈνΈ)
- **μ•λ¦Ό**: `/api/v1/alerts/*` (7κ° μ—”λ“ν¬μΈνΈ)
- **AI λΌμ°ν…**: `/ai-routing/*` (6κ° μ—”λ“ν¬μΈνΈ)

### AI λ¶„μ„ μ„λ²„μ—μ„ λ°κ²¬λ μ—”λ“ν¬μΈνΈ:
- **μ΄λ―Έμ§€ μ—…λ΅λ“**: `/simple/*` (3κ° μ—”λ“ν¬μΈνΈ)
- **μ›Ήν›… μ‘λ‹µ**: `/api/v1/webhook/response/*` (6κ° μ—”λ“ν¬μΈνΈ)
- **μ΄λ―Έμ§€ μ €μ¥**: `/api/v1/webhook/upload-image`

## 5. κ¶μ¥μ‚¬ν•­

### μ¦‰μ‹ μμ • ν•„μ”
1. **AI λ¶„μ„ μ„λ²„ μ»¨ν…μ¤νΈ ν¨μ¤ μμ •**
   - ν„μ¬: `server.servlet.context-path=/api/v1`
   - κ¶μ¥: μ»¨ν…μ¤νΈ ν¨μ¤ μ κ±° λλ” μΌκ΄€μ„± μλ” μ„¤μ •

2. **API κ²μ΄νΈμ›¨μ΄ μ„λΉ„μ¤ μ¬μ‹μ‘ λ° μ„¤μ • μ κ²€**

### κ°μ„  μ‚¬ν•­
1. **ν†µν•© ν—¬μ¤μ²΄ν¬ μ‹μ¤ν… κµ¬μ¶•**
2. **API λ¬Έμ„ν™” μλ™ν™”**
3. **μ„λΉ„μ¤ κ°„ ν†µμ‹  λ¨λ‹ν„°λ§ κ°•ν™”**

## 6. ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€

- **μ΄ μ‹λ³„λ API μ—”λ“ν¬μΈνΈ**: 73κ°
- **ν…μ¤νΈ μ™„λ£**: 10κ° (μ£Όμ” μ—”λ“ν¬μΈνΈ)
- **μ ‘κ·Ό λ¶κ°€ (μ„¤μ • λ¬Έμ )**: 15κ°
- **μΈμ¦ ν•„μ” (μ •μƒ)**: 48κ°

---

**κ²°λ΅ **: λ©”μΈ API μ„λ²„μ™€ μΈν”„λΌ μ„λΉ„μ¤λ“¤μ€ λ€μ²΄λ΅ μ •μƒ μ‘λ™ν•κ³  μμΌλ‚, AI λ¶„μ„ μ„λ²„μ μ»¨ν…μ¤νΈ ν¨μ¤ μ„¤μ • λ¬Έμ μ™€ API κ²μ΄νΈμ›¨μ΄μ μ„λΉ„μ¤ λ¶μ•μ •μ„±μ΄ μ£Όμ” ν•΄κ²° κ³Όμ μ…λ‹λ‹¤.