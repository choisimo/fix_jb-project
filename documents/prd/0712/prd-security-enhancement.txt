# Production ë³´ì•ˆ ì„¤ì • ê°•í™” PRD

## 1. ëª©ì  ë° ê°œìš”
- Production í™˜ê²½ì—ì„œ ì•ˆì „í•œ ìš´ì˜ì„ ìœ„í•œ ë³´ì•ˆ ì„¤ì • ê°•í™”
- ëª¨ë“  ë¯¼ê° ì •ë³´ì˜ ì•ˆì „í•œ ê´€ë¦¬ ì²´ê³„ êµ¬ì¶•
- ë³´ì•ˆ ì •ì±… ì¤€ìˆ˜ ë° ì·¨ì•½ì  ì œê±°

## 2. í˜„ì¬ ë³´ì•ˆ ì·¨ì•½ì  ë¶„ì„

### ğŸ”´ Critical ë³´ì•ˆ ì´ìŠˆ

#### 2.1 í•˜ë“œì½”ë”©ëœ ë¯¼ê° ì •ë³´
**ìœ„ì¹˜:** `application.yml`, `application-prod.yml`
**í˜„ì¬ ìƒíƒœ:**
```yaml
# ìœ„í—˜í•œ í˜„ì¬ ì„¤ì •
spring:
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: your-google-client-id      # âŒ placeholder
            client-secret: your-google-client-secret  # âŒ placeholder
          kakao:
            client-id: your-kakao-client-id       # âŒ placeholder
            client-secret: your-kakao-client-secret   # âŒ placeholder

app:
  jwt:
    secret: mySecretKey12345678901234567890123456789012345678901234567890  # âŒ í•˜ë“œì½”ë”©
  roboflow:
    api-key: your-roboflow-api-key               # âŒ placeholder
  openrouter:
    api:
      key: your-openrouter-api-key               # âŒ placeholder

spring:
  datasource:
    password: password                           # âŒ ê¸°ë³¸ê°’
```

**ë³´ì•ˆ ìœ„í—˜ë„:** CRITICAL
**ê³µê²© ë²¡í„°:** ì†ŒìŠ¤ì½”ë“œ ë…¸ì¶œ, ë¬´ë‹¨ API ì ‘ê·¼, í† í° ìœ„ì¡°

#### 2.2 ì•”í˜¸í™”ë˜ì§€ ì•Šì€ ì„¤ì • íŒŒì¼
**í˜„ì¬ ìƒíƒœ:** ëª¨ë“  ì„¤ì •ì´ í‰ë¬¸ìœ¼ë¡œ ì €ì¥
**ìœ„í—˜ë„:** HIGH
**í•„ìš” ì¡°ì¹˜:** ì„¤ì • ì•”í˜¸í™” ë° ëŸ°íƒ€ì„ ë³µí˜¸í™”

## 3. ë³´ì•ˆ ê°•í™” êµ¬í˜„ ìš”êµ¬ì‚¬í•­

### ğŸ“‹ Phase 1: í™˜ê²½ë³€ìˆ˜ ê¸°ë°˜ ì„¤ì • ì™„ì„±

#### 3.1 OAuth í´ë¼ì´ì–¸íŠ¸ ë³´ì•ˆ ì„¤ì •
**ëª©í‘œ:** OAuth í´ë¼ì´ì–¸íŠ¸ ì •ë³´ì˜ ì•ˆì „í•œ ê´€ë¦¬

**êµ¬í˜„ ìš”êµ¬ì‚¬í•­:**
```yaml
# application-prod.yml (ë³´ì•ˆ ê°•í™” ë²„ì „)
spring:
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID:#{null}}
            client-secret: ${GOOGLE_CLIENT_SECRET:#{null}}
            scope: profile,email
            redirect-uri: ${APP_BASE_URL}/login/oauth2/code/google
          kakao:
            client-id: ${KAKAO_CLIENT_ID:#{null}}
            client-secret: ${KAKAO_CLIENT_SECRET:#{null}}
            client-authentication-method: client_secret_post
            authorization-grant-type: authorization_code
            redirect-uri: ${APP_BASE_URL}/login/oauth2/code/kakao
            scope: profile_nickname,account_email
        provider:
          kakao:
            authorization-uri: https://kauth.kakao.com/oauth/authorize
            token-uri: https://kauth.kakao.com/oauth/token
            user-info-uri: https://kapi.kakao.com/v2/user/me
            user-name-attribute: id
```

**ë³´ì•ˆ ê²€ì¦ ë¡œì§:**
```java
@Component
@ConfigurationProperties(prefix = "spring.security.oauth2.client.registration")
public class OAuthSecurityValidator {
    
    @PostConstruct
    public void validateOAuthConfiguration() {
        validateGoogleConfiguration();
        validateKakaoConfiguration();
    }
    
    private void validateGoogleConfiguration() {
        String clientId = environment.getProperty("GOOGLE_CLIENT_ID");
        String clientSecret = environment.getProperty("GOOGLE_CLIENT_SECRET");
        
        if (isPlaceholderValue(clientId) || isPlaceholderValue(clientSecret)) {
            throw new SecurityException("Google OAuth credentials not properly configured");
        }
        
        // í´ë¼ì´ì–¸íŠ¸ ID í˜•ì‹ ê²€ì¦ (Googleì˜ ê²½ìš°)
        if (!clientId.matches("\\d+-[a-zA-Z0-9]+\\.apps\\.googleusercontent\\.com")) {
            throw new SecurityException("Invalid Google Client ID format");
        }
    }
    
    private boolean isPlaceholderValue(String value) {
        return value == null || value.startsWith("your-") || value.equals("#{null}");
    }
}
```

#### 3.2 JWT ë³´ì•ˆ ê°•í™”
**ëª©í‘œ:** JWT í† í°ì˜ ì•ˆì „í•œ ìƒì„± ë° ê²€ì¦

**êµ¬í˜„ ìš”êµ¬ì‚¬í•­:**
```yaml
# application-prod.yml
app:
  jwt:
    secret: ${JWT_SECRET:#{null}}
    expiration: ${JWT_EXPIRATION:86400000}    # 24ì‹œê°„
    refresh-expiration: ${JWT_REFRESH_EXPIRATION:604800000}  # 7ì¼
    issuer: ${JWT_ISSUER:jeonbuk-report-platform}
    algorithm: ${JWT_ALGORITHM:HS256}
```

**JWT ë³´ì•ˆ ì„¤ì • í´ë˜ìŠ¤:**
```java
@Component
@ConfigurationProperties(prefix = "app.jwt")
public class JwtSecurityConfig {
    
    private String secret;
    private long expiration;
    private long refreshExpiration;
    private String issuer;
    private String algorithm;
    
    @PostConstruct
    public void validateJwtConfiguration() {
        validateSecret();
        validateExpiration();
        validateAlgorithm();
    }
    
    private void validateSecret() {
        if (secret == null || secret.length() < 64) {
            throw new SecurityException("JWT secret must be at least 256 bits (64 characters)");
        }
        
        if (secret.startsWith("mySecretKey") || secret.contains("placeholder")) {
            throw new SecurityException("JWT secret appears to be a placeholder value");
        }
        
        // ì—”íŠ¸ë¡œí”¼ ê²€ì¦ (ëœë¤ì„± í™•ì¸)
        if (calculateEntropy(secret) < 4.0) {
            throw new SecurityException("JWT secret has insufficient entropy");
        }
    }
    
    private double calculateEntropy(String input) {
        Map<Character, Integer> charCounts = new HashMap<>();
        for (char c : input.toCharArray()) {
            charCounts.put(c, charCounts.getOrDefault(c, 0) + 1);
        }
        
        double entropy = 0.0;
        int length = input.length();
        for (int count : charCounts.values()) {
            double probability = (double) count / length;
            entropy -= probability * (Math.log(probability) / Math.log(2));
        }
        return entropy;
    }
}
```

#### 3.3 ë°ì´í„°ë² ì´ìŠ¤ ë³´ì•ˆ ì„¤ì •
**ëª©í‘œ:** ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ì˜ ì•ˆì „í•œ ê´€ë¦¬

**êµ¬í˜„ ìš”êµ¬ì‚¬í•­:**
```yaml
# application-prod.yml
spring:
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/jeonbuk_report_db}
    username: ${DB_USERNAME:#{null}}
    password: ${DB_PASSWORD:#{null}}
    driver-class-name: org.postgresql.Driver
    hikari:
      connection-timeout: 20000
      maximum-pool-size: ${DB_POOL_SIZE:10}
      minimum-idle: ${DB_POOL_MIN_IDLE:2}
      idle-timeout: 300000
      max-lifetime: 1200000
      leak-detection-threshold: 60000
```

**ë°ì´í„°ë² ì´ìŠ¤ ë³´ì•ˆ ê²€ì¦:**
```java
@Component
public class DatabaseSecurityValidator {
    
    @EventListener
    public void validateOnDataSourceInitialization(DataSourceInitializedEvent event) {
        validateDatabaseCredentials();
        validateConnectionSecurity();
    }
    
    private void validateDatabaseCredentials() {
        String username = environment.getProperty("DB_USERNAME");
        String password = environment.getProperty("DB_PASSWORD");
        
        if ("postgres".equals(username) && "password".equals(password)) {
            throw new SecurityException("Database using default credentials - security risk!");
        }
        
        if (password == null || password.length() < 12) {
            throw new SecurityException("Database password must be at least 12 characters");
        }
    }
    
    private void validateConnectionSecurity() {
        String dbUrl = environment.getProperty("DB_URL");
        
        // SSL ì—°ê²° í™•ì¸
        if (isProductionProfile() && !dbUrl.contains("ssl=true")) {
            log.warn("Database connection should use SSL in production");
        }
    }
}
```

#### 3.4 ì™¸ë¶€ API í‚¤ ë³´ì•ˆ ê´€ë¦¬
**ëª©í‘œ:** Roboflow, OpenRouter API í‚¤ì˜ ì•ˆì „í•œ ê´€ë¦¬

**êµ¬í˜„ ìš”êµ¬ì‚¬í•­:**
```yaml
# application-prod.yml
app:
  roboflow:
    api-key: ${ROBOFLOW_API_KEY:#{null}}
    workspace-url: ${ROBOFLOW_WORKSPACE_URL:#{null}}
    timeout: ${ROBOFLOW_TIMEOUT:30000}
    max-retries: ${ROBOFLOW_MAX_RETRIES:3}
  
  openrouter:
    api:
      key: ${OPENROUTER_API_KEY:#{null}}
      base-url: ${OPENROUTER_BASE_URL:https://openrouter.ai/api/v1}
      model: ${OPENROUTER_MODEL:qwen/qwen2.5-vl-72b-instruct:free}
      timeout: ${OPENROUTER_TIMEOUT:60000}
      max-retries: ${OPENROUTER_MAX_RETRIES:3}
```

**API í‚¤ ë³´ì•ˆ ê²€ì¦:**
```java
@Component
@ConfigurationProperties(prefix = "app")
public class ExternalApiSecurityValidator {
    
    @PostConstruct
    public void validateApiKeys() {
        validateRoboflowConfiguration();
        validateOpenRouterConfiguration();
    }
    
    private void validateRoboflowConfiguration() {
        String apiKey = environment.getProperty("ROBOFLOW_API_KEY");
        String workspaceUrl = environment.getProperty("ROBOFLOW_WORKSPACE_URL");
        
        if (isPlaceholderValue(apiKey) || isPlaceholderValue(workspaceUrl)) {
            throw new SecurityException("Roboflow API configuration incomplete");
        }
        
        // API í‚¤ í˜•ì‹ ê²€ì¦
        if (!apiKey.matches("[A-Za-z0-9]{20,}")) {
            throw new SecurityException("Invalid Roboflow API key format");
        }
    }
    
    private void validateOpenRouterConfiguration() {
        String apiKey = environment.getProperty("OPENROUTER_API_KEY");
        
        if (isPlaceholderValue(apiKey)) {
            throw new SecurityException("OpenRouter API key not configured");
        }
        
        // OpenRouter API í‚¤ í˜•ì‹ ê²€ì¦
        if (!apiKey.startsWith("sk-") || apiKey.length() < 32) {
            throw new SecurityException("Invalid OpenRouter API key format");
        }
    }
}
```

### ğŸ“‹ Phase 2: ì„¤ì • íŒŒì¼ ì•”í˜¸í™”

#### 2.1 Jasypt ê¸°ë°˜ ì„¤ì • ì•”í˜¸í™”
**ëª©í‘œ:** ë¯¼ê°í•œ ì„¤ì •ê°’ì˜ ì•”í˜¸í™” ì €ì¥

**ì˜ì¡´ì„± ì¶”ê°€:**
```gradle
// build.gradle
implementation 'com.github.ulisesbocchio:jasypt-spring-boot-starter:3.0.5'
```

**ì•”í˜¸í™” ì„¤ì •:**
```java
@Configuration
@EnableEncryptableProperties
public class EncryptionConfig {
    
    @Bean("jasyptStringEncryptor")
    public StringEncryptor stringEncryptor() {
        PooledPBEStringEncryptor encryptor = new PooledPBEStringEncryptor();
        SimpleStringPBEConfig config = new SimpleStringPBEConfig();
        
        config.setPassword(getEncryptionPassword());
        config.setAlgorithm("PBEWITHHMACSHA512ANDAES_256");
        config.setKeyObtentionIterations("1000");
        config.setPoolSize("1");
        config.setProviderName("SunJCE");
        config.setSaltGeneratorClassName("org.jasypt.salt.RandomSaltGenerator");
        config.setIvGeneratorClassName("org.jasypt.iv.RandomIvGenerator");
        config.setStringOutputType("base64");
        
        encryptor.setConfig(config);
        return encryptor;
    }
    
    private String getEncryptionPassword() {
        String password = System.getenv("JASYPT_ENCRYPTOR_PASSWORD");
        if (password == null) {
            throw new SecurityException("JASYPT_ENCRYPTOR_PASSWORD environment variable not set");
        }
        return password;
    }
}
```

**ì•”í˜¸í™”ëœ ì„¤ì • ì˜ˆì‹œ:**
```yaml
# application-prod.yml (ì•”í˜¸í™” ì ìš© í›„)
spring:
  datasource:
    password: ENC(encrypted_password_here)

app:
  jwt:
    secret: ENC(encrypted_jwt_secret_here)
  roboflow:
    api-key: ENC(encrypted_roboflow_key_here)
  openrouter:
    api:
      key: ENC(encrypted_openrouter_key_here)
```

### ğŸ“‹ Phase 3: ìš´ì˜ ë³´ì•ˆ ê°•í™”

#### 3.1 HTTPS ë° SSL/TLS ì„¤ì •
**ëª©í‘œ:** ëª¨ë“  í†µì‹ ì˜ ì•”í˜¸í™”

**Nginx ì„¤ì •:**
```nginx
# nginx.conf
server {
    listen 443 ssl http2;
    server_name your-domain.com;
    
    ssl_certificate /etc/ssl/certs/your-cert.pem;
    ssl_certificate_key /etc/ssl/private/your-key.pem;
    
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers on;
    
    # HSTS í—¤ë”
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    
    # ë³´ì•ˆ í—¤ë”
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    add_header Referrer-Policy "strict-origin-when-cross-origin";
    
    location / {
        proxy_pass http://app-backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

# HTTP to HTTPS redirect
server {
    listen 80;
    server_name your-domain.com;
    return 301 https://$server_name$request_uri;
}
```

#### 3.2 ë³´ì•ˆ í—¤ë” ì„¤ì •
**Spring Security ì„¤ì •:**
```java
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .headers(headers -> headers
                .frameOptions().deny()
                .contentTypeOptions().and()
                .xssProtection().and()
                .referrerPolicy(ReferrerPolicy.STRICT_ORIGIN_WHEN_CROSS_ORIGIN)
                .httpStrictTransportSecurity(hstsConfig -> hstsConfig
                    .maxAgeInSeconds(31536000)
                    .includeSubdomains(true)
                )
            )
            .sessionManagement(session -> session
                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)
                .maximumSessions(1)
                .maxSessionsPreventsLogin(false)
            );
            
        return http.build();
    }
}
```

## 4. í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬ ê°€ì´ë“œ

### 4.1 ê°œë°œ í™˜ê²½ (.env.dev)
```bash
# OAuth ì„¤ì •
GOOGLE_CLIENT_ID=your-dev-google-client-id
GOOGLE_CLIENT_SECRET=your-dev-google-client-secret
KAKAO_CLIENT_ID=your-dev-kakao-client-id
KAKAO_CLIENT_SECRET=your-dev-kakao-client-secret

# JWT ì„¤ì •
JWT_SECRET=dev-jwt-secret-minimum-64-characters-long-for-security-purposes
JWT_EXPIRATION=86400000
JWT_REFRESH_EXPIRATION=604800000

# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
DB_URL=jdbc:postgresql://localhost:5432/jeonbuk_report_dev
DB_USERNAME=dev_user
DB_PASSWORD=dev_secure_password123

# API í‚¤ ì„¤ì •
ROBOFLOW_API_KEY=your-dev-roboflow-api-key
ROBOFLOW_WORKSPACE_URL=https://detect.roboflow.com/your-dev-workspace
OPENROUTER_API_KEY=sk-or-dev-api-key-here

# ì•”í˜¸í™” í‚¤
JASYPT_ENCRYPTOR_PASSWORD=dev-encryption-password
```

### 4.2 ìš´ì˜ í™˜ê²½ (.env.prod)
```bash
# OAuth ì„¤ì • (ì‹¤ì œ ìš´ì˜ ê°’)
GOOGLE_CLIENT_ID=123456789-abcdefghijklmnop.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-actual-google-client-secret
KAKAO_CLIENT_ID=actual-kakao-app-id
KAKAO_CLIENT_SECRET=actual-kakao-client-secret

# JWT ì„¤ì • (ê°•ë ¥í•œ ìš´ì˜ í‚¤)
JWT_SECRET=production-jwt-secret-extremely-long-and-random-string-with-high-entropy-256-bits
JWT_EXPIRATION=3600000
JWT_REFRESH_EXPIRATION=604800000

# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (ìš´ì˜ DB)
DB_URL=jdbc:postgresql://prod-db-server:5432/jeonbuk_report_prod?ssl=true
DB_USERNAME=prod_report_user
DB_PASSWORD=production-database-secure-password-with-special-chars!@#

# API í‚¤ ì„¤ì • (ì‹¤ì œ ìš´ì˜ í‚¤)
ROBOFLOW_API_KEY=actual-roboflow-production-api-key
ROBOFLOW_WORKSPACE_URL=https://detect.roboflow.com/actual-production-workspace
OPENROUTER_API_KEY=sk-or-actual-production-api-key

# ì•”í˜¸í™” í‚¤ (ê°•ë ¥í•œ ìš´ì˜ í‚¤)
JASYPT_ENCRYPTOR_PASSWORD=production-encryption-password-very-secure

# ì¶”ê°€ ìš´ì˜ ì„¤ì •
APP_BASE_URL=https://your-production-domain.com
REDIS_PASSWORD=production-redis-password
KAFKA_SASL_PASSWORD=production-kafka-password
```

## 5. ë³´ì•ˆ ê²€ì¦ ë° í…ŒìŠ¤íŠ¸

### 5.1 ìë™í™”ëœ ë³´ì•ˆ ê²€ì¦
```java
@Component
public class ProductionSecurityChecker {
    
    @EventListener
    public void validateSecurityOnStartup(ApplicationReadyEvent event) {
        validateAllSecurityRequirements();
    }
    
    private void validateAllSecurityRequirements() {
        List<String> violations = new ArrayList<>();
        
        // 1. í™˜ê²½ë³€ìˆ˜ ê²€ì¦
        violations.addAll(validateEnvironmentVariables());
        
        // 2. placeholder ê°’ ê²€ì¦
        violations.addAll(validateNoPlaceholderValues());
        
        // 3. ì•”í˜¸ ê°•ë„ ê²€ì¦
        violations.addAll(validatePasswordStrength());
        
        // 4. SSL/TLS ì„¤ì • ê²€ì¦
        violations.addAll(validateSslConfiguration());
        
        if (!violations.isEmpty()) {
            String errorMessage = "Security validation failed:\n" + 
                String.join("\n", violations);
            throw new SecurityException(errorMessage);
        }
        
        log.info("âœ… All security requirements validated successfully");
    }
}
```

### 5.2 ë³´ì•ˆ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
```java
@SpringBootTest
@ActiveProfiles("test")
class SecurityConfigurationTest {
    
    @Test
    void shouldFailWithPlaceholderValues() {
        // placeholder ê°’ìœ¼ë¡œ ì„¤ì • ì‹œ ì‹œì‘ ì‹¤íŒ¨ í™•ì¸
        System.setProperty("GOOGLE_CLIENT_ID", "your-google-client-id");
        
        assertThrows(SecurityException.class, () -> {
            SpringApplication.run(Application.class);
        });
    }
    
    @Test
    void shouldValidateJwtSecretStrength() {
        // ì•½í•œ JWT secret ê²€ì¦
        System.setProperty("JWT_SECRET", "weak");
        
        assertThrows(SecurityException.class, () -> {
            new JwtSecurityConfig().validateJwtConfiguration();
        });
    }
    
    @Test
    void shouldEnforceHttpsInProduction() {
        // ìš´ì˜ í™˜ê²½ì—ì„œ HTTPS ê°•ì œ í™•ì¸
        System.setProperty("spring.profiles.active", "prod");
        
        // HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸ í…ŒìŠ¤íŠ¸
        // ë³´ì•ˆ í—¤ë” ì¡´ì¬ í™•ì¸
    }
}
```

## 6. ë°°í¬ ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… í•„ìˆ˜ ë³´ì•ˆ ìš”êµ¬ì‚¬í•­
- [ ] ëª¨ë“  placeholder ê°’ ì œê±°
- [ ] í™˜ê²½ë³€ìˆ˜ë¡œ ëª¨ë“  ë¯¼ê° ì •ë³´ ê´€ë¦¬
- [ ] JWT secret 256bit ì´ìƒ
- [ ] HTTPS ì ìš© (ì¸ì¦ì„œ ì„¤ì •)
- [ ] ë³´ì•ˆ í—¤ë” ì„¤ì • ì™„ë£Œ
- [ ] ë°ì´í„°ë² ì´ìŠ¤ SSL ì—°ê²°
- [ ] API í‚¤ ìœ íš¨ì„± ê²€ì¦
- [ ] ì•”í˜¸í™” ì„¤ì • ì ìš©

### âœ… ìš´ì˜ í™˜ê²½ ì„¤ì •
- [ ] ë°©í™”ë²½ ê·œì¹™ ì„¤ì •
- [ ] ë¶ˆí•„ìš”í•œ í¬íŠ¸ ì°¨ë‹¨
- [ ] ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ì„¤ì •
- [ ] ì¹¨ì… íƒì§€ ì‹œìŠ¤í…œ ì—°ë™
- [ ] ì •ê¸°ì  ë³´ì•ˆ ì—…ë°ì´íŠ¸ ê³„íš
- [ ] ë°±ì—… ë° ë³µêµ¬ ê³„íš
- [ ] ì‚¬ê³  ëŒ€ì‘ ê³„íš ìˆ˜ë¦½

## 7. ë³´ì•ˆ ëª¨ë‹ˆí„°ë§

### 7.1 ì‹¤ì‹œê°„ ë³´ì•ˆ ëª¨ë‹ˆí„°ë§
```java
@Component
public class SecurityMonitor {
    
    @EventListener
    public void handleAuthenticationFailure(AbstractAuthenticationFailureEvent event) {
        // ë¡œê·¸ì¸ ì‹¤íŒ¨ ëª¨ë‹ˆí„°ë§
        log.warn("Authentication failure: {}", event.getException().getMessage());
        
        // ì¼ì • íšŸìˆ˜ ì´ìƒ ì‹¤íŒ¨ ì‹œ ì•Œë¦¼
        if (isExcessiveFailures(event.getAuthentication().getName())) {
            alertService.sendSecurityAlert("Excessive login failures detected");
        }
    }
    
    @EventListener
    public void handleSuspiciousActivity(SuspiciousActivityEvent event) {
        // ì˜ì‹¬ìŠ¤ëŸ¬ìš´ í™œë™ ê°ì§€
        log.error("Suspicious activity detected: {}", event.getDescription());
        alertService.sendSecurityAlert(event.getDescription());
    }
}
```

ì´ PRDë¥¼ í†µí•´ Production í™˜ê²½ì—ì„œ ì•ˆì „í•˜ê²Œ ìš´ì˜í•  ìˆ˜ ìˆëŠ” ë³´ì•ˆ ì²´ê³„ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.